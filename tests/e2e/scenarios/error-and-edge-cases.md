# 에러 시나리오 및 엣지 케이스 테스트

## 개요
메모 앱의 예외 상황, 에러 처리, 엣지 케이스에 대한 E2E 테스트 시나리오입니다.

## 테스트 환경
- URL: http://localhost:3001
- 브라우저: Chrome, Firefox, Safari
- 개발자 도구를 활용한 시뮬레이션

---

## 1. 네트워크 관련 에러 시나리오

### 1.1 완전한 네트워크 차단 (우선순위: High)
**목적**: 네트워크가 완전히 차단된 상황에서 앱의 동작 확인

**전제조건**: 
- 개발자 도구에서 네트워크를 오프라인으로 설정

**테스트 단계**:
1. 네트워크 연결을 완전히 차단
2. 페이지 새로고침 시도
3. 새 메모 작성 시도
4. 기존 메모 편집 시도
5. 메모 삭제 시도
6. 검색 기능 사용 시도
7. 각 상황에서의 에러 메시지 확인
8. 네트워크 복구 후 정상 동작 확인

**예상 결과**:
- 적절한 오프라인 메시지 표시
- 로컬 데이터는 계속 접근 가능
- 네트워크 복구 시 자동 동기화 (있는 경우)
- 사용자가 상황을 이해할 수 있는 안내

**실패 조건**:
- 앱이 완전히 작동 중단
- 에러 메시지 없이 무한 로딩
- 네트워크 복구 후에도 정상 작동하지 않음
- 로컬 데이터 접근 불가

**예상 실행 시간**: 2분

### 1.2 간헐적 네트워크 오류 (우선순위: Medium)
**목적**: 네트워크가 불안정한 상황에서의 앱 동작 확인

**전제조건**: 
- 개발자 도구에서 네트워크 속도를 매우 느리게 설정 또는 간헐적 차단

**테스트 단계**:
1. 네트워크를 매우 느린 속도로 설정 (Slow 3G)
2. 메모 저장 중 네트워크 차단
3. 메모 로딩 중 네트워크 차단
4. 타임아웃 발생 상황 확인
5. 재시도 메커니즘 확인 (있는 경우)
6. 부분적 데이터 로딩 상황 처리

**예상 결과**:
- 로딩 상태가 적절히 표시됨
- 타임아웃 시 명확한 에러 메시지
- 재시도 옵션 제공 (가능한 경우)
- 부분 실패에 대한 적절한 처리

**실패 조건**:
- 무한 로딩 상태
- 타임아웃 처리 부족
- 부분 실패 시 데이터 불일치
- 사용자에게 상황 설명 부족

**예상 실행 시간**: 2분 30초

---

## 2. 데이터 관련 에러 시나리오

### 2.1 로컬 스토리지 용량 초과 (우선순위: Medium)
**목적**: 로컬 스토리지 용량이 가득 찬 상황에서의 동작 확인

**전제조건**: 
- 개발자 도구에서 스토리지 용량을 인위적으로 제한

**테스트 단계**:
1. 로컬 스토리지를 거의 가득 채움
2. 새 메모 작성 시도
3. 기존 메모 편집 시도
4. 대용량 내용의 메모 저장 시도
5. 스토리지 초과 시 에러 처리 확인
6. 사용자에게 상황 안내 확인
7. 데이터 정리 옵션 제공 확인 (있는 경우)

**예상 결과**:
- 스토리지 부족 시 명확한 에러 메시지
- 데이터 손실 방지 메커니즘
- 사용자가 해결 방법을 이해할 수 있음
- 기존 데이터 보호

**실패 조건**:
- 에러 없이 데이터 손실
- 앱 크래시 발생
- 불분명한 에러 메시지
- 복구 방법 제시 부족

**예상 실행 시간**: 1분 30초

### 2.2 손상된 로컬 스토리지 데이터 (우선순위: High)
**목적**: 로컬 스토리지에 잘못된 데이터가 있을 때의 처리 확인

**전제조건**: 
- 개발자 도구에서 로컬 스토리지에 잘못된 JSON 데이터 삽입

**테스트 단계**:
1. 로컬 스토리지에 잘못된 JSON 형식 데이터 삽입
2. 페이지 새로고침
3. 앱 로딩 과정 관찰
4. 에러 처리 메커니즘 확인
5. 데이터 복구 시도 확인
6. 기본 상태로 초기화 확인
7. 새로운 메모 작성 가능 여부 확인

**예상 결과**:
- 앱이 크래시하지 않고 안정적으로 처리
- 손상된 데이터를 감지하고 적절히 처리
- 기본 상태로 안전하게 초기화
- 사용자에게 상황 안내

**실패 조건**:
- 앱 크래시 또는 무한 로딩
- JavaScript 에러로 인한 기능 정지
- 손상된 데이터 복구 시도로 인한 추가 오류
- 사용자 혼란

**예상 실행 시간**: 1분 30초

### 2.3 대용량 데이터 처리 (우선순위: Low)
**목적**: 매우 많은 메모나 큰 크기의 메모 처리 능력 확인

**전제조건**: 
- 100개 이상의 메모 또는 매우 긴 내용의 메모 준비

**테스트 단계**:
1. 대량의 메모 데이터 로딩 시간 측정
2. 매우 긴 내용(10,000자 이상)의 메모 작성
3. 대용량 메모 편집 시 성능 확인
4. 검색 기능의 대용량 데이터 처리 확인
5. 메모리 사용량 모니터링
6. 브라우저 응답성 확인
7. 페이지네이션이나 가상화 동작 확인 (있는 경우)

**예상 결과**:
- 대용량 데이터에서도 합리적인 성능 유지
- UI가 블로킹되지 않음
- 메모리 사용량이 적절한 범위 내
- 사용자 경험 저하 최소화

**실패 조건**:
- 로딩 시간 과도하게 길어짐
- 브라우저 응답 없음 상태
- 메모리 누수 발생
- UI 완전 블로킹

**예상 실행 시간**: 2분

---

## 3. 입력 검증 에러 시나리오

### 3.1 극단적인 입력값 처리 (우선순위: High)
**목적**: 예상 범위를 벗어난 입력값에 대한 처리 확인

**전제조건**: 
- 메모 작성/편집 폼이 열린 상태

**테스트 단계**:
1. 제목 필드 극단 케이스:
   - 빈 문자열
   - 공백만 포함
   - 매우 긴 제목 (1000자 이상)
   - 특수 문자만 포함 (!@#$%^&*)
   - 유니코드 문자 (이모지, 한자 등)
   - HTML/Script 태그 포함
2. 내용 필드 극단 케이스:
   - 빈 내용
   - 매우 긴 내용 (100,000자 이상)
   - 복잡한 마크다운 문법
   - 잘못된 마크다운 문법
   - 특수 문자 조합
3. 태그 필드 극단 케이스:
   - 매우 긴 태그명
   - 특수 문자 포함 태그
   - 공백 포함 태그
   - 중복 태그 대량 입력

**예상 결과**:
- 모든 극단 케이스에 대해 적절한 검증
- 명확한 에러 메시지 제공
- 데이터 무결성 보장
- XSS 공격 방지

**실패 조건**:
- 검증 없이 잘못된 데이터 저장
- 앱 크래시 또는 오류 발생
- 보안 취약점 노출
- 사용자 혼란을 야기하는 동작

**예상 실행 시간**: 3분

### 3.2 동시 입력 및 충돌 상황 (우선순위: Medium)
**목적**: 여러 탭에서 동시에 같은 메모를 편집하는 상황 처리

**전제조건**: 
- 같은 앱을 두 개의 탭에서 열어둔 상태

**테스트 단계**:
1. 두 탭에서 같은 메모를 동시에 편집 모드로 열기
2. 한 탭에서 메모 수정 후 저장
3. 다른 탭에서도 수정 후 저장 시도
4. 충돌 감지 및 처리 확인
5. 데이터 일관성 확인
6. 사용자에게 상황 안내 확인
7. 충돌 해결 옵션 제공 확인

**예상 결과**:
- 충돌 상황을 적절히 감지
- 데이터 손실 방지
- 사용자가 충돌을 이해하고 해결할 수 있음
- 최신 데이터 우선 또는 사용자 선택 옵션

**실패 조건**:
- 충돌 감지 실패
- 데이터 손실 또는 불일치
- 사용자 혼란
- 무작정 덮어쓰기

**예상 실행 시간**: 2분

---

## 4. UI/UX 엣지 케이스

### 4.1 극한 화면 크기 (우선순위: Medium)
**목적**: 매우 작거나 큰 화면에서의 앱 동작 확인

**전제조건**: 
- 브라우저 창 크기 조절 가능한 상태

**테스트 단계**:
1. 매우 작은 화면 (280px × 480px) 테스트:
   - 모든 UI 요소 접근 가능성 확인
   - 텍스트 가독성 확인
   - 버튼 터치 가능성 확인
2. 매우 큰 화면 (4K, 3840px × 2160px) 테스트:
   - 레이아웃 확장성 확인
   - 콘텐츠 중앙 정렬 확인
   - 읽기 편의성 유지 확인
3. 세로/가로 비율 극단 케이스:
   - 매우 좁고 긴 화면 (360px × 1200px)
   - 매우 넓고 낮은 화면 (1200px × 360px)

**예상 결과**:
- 모든 화면 크기에서 사용 가능
- UI 요소가 적절히 조정됨
- 가독성과 접근성 유지
- 스크롤 동작 정상

**실패 조건**:
- UI 요소가 화면을 벗어남
- 텍스트나 버튼이 너무 작아짐
- 레이아웃 완전 파괴
- 스크롤 불가능한 콘텐츠

**예상 실행 시간**: 2분

### 4.2 접근성 극한 상황 (우선순위: Medium)
**목적**: 접근성 보조 도구 사용 시의 극한 상황 테스트

**전제조건**: 
- 스크린 리더나 고대비 모드 활성화

**테스트 단계**:
1. 스크린 리더로 전체 앱 탐색
2. 키보드만으로 모든 기능 사용
3. 고대비 모드에서 UI 확인
4. 확대/축소 400%에서 사용성 확인
5. 색맹 시뮬레이션에서 정보 전달 확인
6. 음성 명령으로 조작 (가능한 경우)

**예상 결과**:
- 스크린 리더가 모든 내용을 적절히 읽음
- 키보드 내비게이션이 논리적임
- 고대비에서도 모든 요소 구분 가능
- 확대 시에도 사용 가능
- 색상에 의존하지 않는 정보 전달

**실패 조건**:
- 스크린 리더가 읽지 못하는 콘텐츠
- 키보드로 접근 불가능한 요소
- 고대비에서 요소 구분 불가
- 확대 시 레이아웃 파괴
- 색상에만 의존하는 정보

**예상 실행 시간**: 3분

---

## 5. 브라우저 호환성 엣지 케이스

### 5.1 구형 브라우저 대응 (우선순위: Low)
**목적**: 지원 범위 경계의 브라우저에서 동작 확인

**전제조건**: 
- 다양한 브라우저 버전 테스트 환경

**테스트 단계**:
1. 지원 최소 버전 브라우저에서 테스트
2. JavaScript 기능 호환성 확인
3. CSS 스타일링 호환성 확인
4. 로컬 스토리지 API 지원 확인
5. 폴리필 동작 확인 (있는 경우)
6. 기능 저하 대응 확인

**예상 결과**:
- 기본 기능은 모든 지원 브라우저에서 동작
- 고급 기능은 적절한 폴백 제공
- 사용자에게 브라우저 업데이트 안내 (필요시)
- 점진적 향상 적용

**실패 조건**:
- 기본 기능도 작동하지 않음
- JavaScript 에러로 인한 완전 실패
- 스타일 완전 깨짐
- 에러 처리 부족

**예상 실행 시간**: 2분

### 5.2 브라우저 확장 프로그램 간섭 (우선순위: Low)
**목적**: 일반적인 브라우저 확장 프로그램과의 호환성 확인

**전제조건**: 
- 광고 차단기, 스크립트 차단기 등 확장 프로그램 설치

**테스트 단계**:
1. 광고 차단기 활성화 상태에서 테스트
2. 스크립트 차단기로 일부 기능 차단 시 테스트
3. 다크 모드 확장 프로그램과의 호환성
4. 자동 번역 확장 프로그램과의 호환성
5. 폼 자동 완성 확장 프로그램과의 호환성

**예상 결과**:
- 대부분의 확장 프로그램과 정상 호환
- 간섭 시에도 기본 기능 유지
- 사용자에게 간섭 상황 안내 (필요시)

**실패 조건**:
- 확장 프로그램으로 인한 완전 작동 불가
- 데이터 손실 또는 오류
- 사용자 혼란

**예상 실행 시간**: 1분 30초

---

## 6. 보안 관련 엣지 케이스

### 6.1 XSS 공격 시도 (우선순위: High)
**목적**: 크로스 사이트 스크립팅 공격에 대한 방어 확인

**전제조건**: 
- 메모 작성 폼에 악의적인 스크립트 입력 준비

**테스트 단계**:
1. 제목에 스크립트 태그 입력:
   ```html
   <script>alert('XSS')</script>
   ```
2. 내용에 다양한 스크립트 패턴 입력:
   ```html
   <img src="x" onerror="alert('XSS')">
   javascript:alert('XSS')
   <iframe src="javascript:alert('XSS')">
   ```
3. 태그에 스크립트 포함 시도
4. 마크다운을 통한 스크립트 삽입 시도
5. URL 파라미터를 통한 스크립트 주입 시도
6. 각 시도에 대한 앱의 방어 메커니즘 확인

**예상 결과**:
- 모든 스크립트가 실행되지 않고 안전하게 처리됨
- 입력값이 적절히 이스케이프됨
- 마크다운 렌더링 시 HTML 태그 무력화
- 사용자 데이터 보호

**실패 조건**:
- 스크립트가 실행됨
- alert나 기타 JavaScript 함수 호출 성공
- HTML 태그가 그대로 렌더링됨
- 보안 취약점 노출

**예상 실행 시간**: 2분

### 6.2 데이터 주입 공격 (우선순위: Medium)
**목적**: 로컬 스토리지 조작을 통한 데이터 주입 공격 방어 확인

**전제조건**: 
- 개발자 도구에서 로컬 스토리지 직접 조작 가능

**테스트 단계**:
1. 로컬 스토리지에 악의적인 데이터 직접 삽입
2. 정상 범위를 벗어난 메모 ID나 속성값 삽입
3. 순환 참조나 깊은 중첩 객체 삽입
4. 앱 재로딩 후 데이터 처리 방식 확인
5. 조작된 데이터로 인한 앱 동작 변화 관찰
6. 데이터 검증 및 정화 메커니즘 확인

**예상 결과**:
- 조작된 데이터를 감지하고 적절히 처리
- 앱이 안정적으로 동작 유지
- 잘못된 데이터는 무시하거나 정화
- 보안 위험 요소 제거

**실패 조건**:
- 조작된 데이터로 인한 앱 크래시
- 보안 취약점을 통한 권한 상승
- 데이터 무결성 파괴
- 예상치 못한 동작

**예상 실행 시간**: 1분 30초

---

## 7. 성능 극한 상황

### 7.1 메모리 누수 테스트 (우선순위: Medium)
**목적**: 장시간 사용 시 메모리 누수가 발생하지 않는지 확인

**전제조건**: 
- 브라우저 개발자 도구의 메모리 탭 활용

**테스트 단계**:
1. 초기 메모리 사용량 측정
2. 메모 생성/편집/삭제를 100회 반복
3. 모달 열기/닫기를 100회 반복
4. 검색어 입력/삭제를 100회 반복
5. 각 단계별 메모리 사용량 측정
6. 가비지 컬렉션 후 메모리 회수 확인
7. 메모리 사용 패턴 분석

**예상 결과**:
- 메모리 사용량이 일정 범위 내에서 유지됨
- 가비지 컬렉션 후 메모리가 적절히 해제됨
- 메모리 누수 없음
- 장시간 사용해도 성능 저하 없음

**실패 조건**:
- 메모리 사용량이 계속 증가
- 가비지 컬렉션 후에도 메모리 미해제
- 브라우저 성능 저하
- 메모리 부족으로 인한 크래시

**예상 실행 시간**: 5분

### 7.2 CPU 과부하 상황 (우선순위: Low)
**목적**: CPU 사용률이 높은 상황에서의 앱 반응성 확인

**전제조건**: 
- CPU 집약적인 작업을 백그라운드에서 실행

**테스트 단계**:
1. 백그라운드에서 CPU 집약적 작업 실행
2. 메모 앱의 기본 기능 테스트
3. UI 반응성 측정
4. 애니메이션 부드러움 확인
5. 검색 응답 시간 측정
6. 모달 열기/닫기 속도 확인

**예상 결과**:
- CPU 부하 상황에서도 기본 기능 유지
- UI가 완전히 블로킹되지 않음
- 사용자가 작업을 계속할 수 있음
- 성능 저하가 있어도 사용 가능한 수준

**실패 조건**:
- UI 완전 정지
- 입력에 대한 반응 없음
- 앱 크래시
- 사용 불가능한 수준의 지연

**예상 실행 시간**: 2분

---

## 8. 복합 에러 시나리오

### 8.1 다중 에러 발생 상황 (우선순위: High)
**목적**: 여러 에러가 동시에 발생하는 상황에서의 처리 확인

**전제조건**: 
- 네트워크 불안정 + 스토리지 부족 + 잘못된 입력값 조합

**테스트 단계**:
1. 네트워크를 불안정하게 설정
2. 로컬 스토리지를 거의 가득 채움
3. 잘못된 형식의 데이터로 메모 작성 시도
4. 동시에 여러 메모 편집 시도
5. 브라우저 탭 여러 개에서 동시 작업
6. 각 에러의 우선순위 처리 확인
7. 에러 메시지의 명확성 확인

**예상 결과**:
- 가장 중요한 에러가 우선 처리됨
- 사용자가 상황을 이해할 수 있는 명확한 안내
- 앱이 안정적으로 동작 유지
- 데이터 무결성 보장

**실패 조건**:
- 에러 메시지가 중복되거나 혼란스러움
- 앱 완전 정지
- 데이터 손실
- 복구 불가능한 상태

**예상 실행 시간**: 3분

### 8.2 연쇄 에러 발생 (우선순위: Medium)
**목적**: 하나의 에러가 다른 에러를 유발하는 상황 처리

**전제조건**: 
- 의도적으로 에러 체인을 만들 수 있는 상황

**테스트 단계**:
1. 초기 에러 발생 (예: 네트워크 오류)
2. 에러 처리 과정에서 추가 에러 유발
3. 에러 복구 시도 중 또 다른 에러 발생
4. 에러 체인의 전파 과정 관찰
5. 최종 에러 처리 결과 확인
6. 앱 상태 복구 가능성 확인

**예상 결과**:
- 에러 체인이 적절히 차단됨
- 무한 에러 루프 방지
- 최종적으로 안정 상태로 복구
- 사용자에게 적절한 안내

**실패 조건**:
- 무한 에러 루프 발생
- 에러가 계속 전파되어 앱 크래시
- 복구 불가능한 상태
- 사용자 혼란 가중

**예상 실행 시간**: 2분 30초

---

## 테스트 실행 가이드라인

### 에러 시뮬레이션 도구
- **Chrome DevTools**: Network 탭에서 오프라인/느린 네트워크 시뮬레이션
- **Application 탭**: 로컬 스토리지 직접 조작
- **Console**: JavaScript 에러 모니터링
- **Performance 탭**: 메모리 및 CPU 사용량 측정

### 테스트 데이터 준비
- 다양한 크기와 형태의 테스트 메모
- 특수 문자, 유니코드, HTML 태그가 포함된 데이터
- 손상된 JSON 데이터 샘플
- XSS 공격 페이로드 모음

### 자동화 고려사항
- 에러 상황 재현을 위한 헬퍼 함수
- 메모리 사용량 모니터링 스크립트
- 네트워크 상태 시뮬레이션 도구
- 에러 로그 수집 메커니즘

### 우선순위별 실행 전략
1. **Critical/High**: 모든 브라우저에서 필수 실행
2. **Medium**: 주요 브라우저에서 실행
3. **Low**: 시간 여유가 있을 때 실행

이 에러 시나리오 및 엣지 케이스 테스트를 통해 메모 앱이 예상치 못한 상황에서도 안정적으로 동작하고 사용자 데이터를 보호할 수 있음을 확인할 수 있습니다.
